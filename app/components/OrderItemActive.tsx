import React from 'react'
import Image from 'next/image';
import holidayRating from '@/public/assets/holidayrating.svg'
import history1 from '@/public/assets/history1.png'
import { orders } from '@/public/data';

const OrderItemActive = () => {

  const activeOrder = orders.find(order => order.bookingDetails.status === "Active");

  const getAVGRating = (ratings: number[] | undefined) => {
    if (!ratings || ratings.length === 0) {
      return 0;
    }
    const sum = ratings.reduce((accumulator, currentValue) => accumulator + currentValue, 0);
    const average = sum / ratings.length;
    return average;
  };

  return (
    <div className='active mb-6'>
      <a href="#" className=" w-full flex flex-col bg-white border border-gray-200 rounded-2xl md:flex-row hover:bg-gray-100">
        <div className='relative rounded-t-2xl md:h-full w-1/3 md:rounded-none md:rounded-l-2xl'>
          <Image className="object-cover rounded-t-2xl md:h-full md:rounded-none md:rounded-l-2xl" src={history1} alt="" />
          <button className='absolute right-3 top-3 text-white'>
            <svg className='w-7' fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M9.653 16.915l-.005-.003-.019-.01a20.759 20.759 0 01-1.162-.682 22.045 22.045 0 01-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 018-2.828A4.5 4.5 0 0118 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 01-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 01-.69.001l-.002-.001z" />
            </svg>
          </button>
          <span className={`absolute left-3 top-3 inline-flex items-center rounded-full font-medium px-2 py-1 text-xs text-white bg-red-700`}>
            -{activeOrder?.discount} discount
          </span>
        </div>
        <div className="flex flex-col gap-9 p-8 leading-normal flex-1 justify-between">
          <div>
            <p className='text-gray-500 text-normal text-sm'>{activeOrder?.accommodationName}</p>
            <h5 className="mb-2 text-2xl font-medium tracking-tight text-gray-900">{activeOrder?.productName}</h5>
          </div>

          <div className='features text-gray-500 grid grid-cols-3 gap-5 w-8/12'>
            <div className='text-xs flex items-center gap-2'>
              <svg className='w-4 h-4' viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 0.657837C6.20573 0.657837 5.47005 0.853149 4.79297 1.24377C4.12891 1.6344 3.60156 2.16825 3.21094 2.84534C2.82031 3.5094 2.625 4.23857 2.625 5.03284C2.625 5.77502 2.79427 6.46513 3.13281 7.10315C3.48438 7.74117 3.95964 8.262 4.55859 8.66565C3.81641 8.99117 3.15234 9.44039 2.56641 10.0133C1.99349 10.5862 1.55078 11.2438 1.23828 11.986C0.91276 12.7542 0.75 13.5615 0.75 14.4078H2C2 13.4964 2.22135 12.663 2.66406 11.9078C3.11979 11.1396 3.72526 10.5341 4.48047 10.0914C5.2487 9.6357 6.08854 9.40784 7 9.40784C7.91146 9.40784 8.74479 9.6357 9.5 10.0914C10.2682 10.5341 10.8737 11.1396 11.3164 11.9078C11.7721 12.663 12 13.4964 12 14.4078H13.25C13.25 13.5615 13.0872 12.7542 12.7617 11.986C12.4492 11.2438 12 10.5862 11.4141 10.0133C10.8411 9.44039 10.1836 8.99117 9.44141 8.66565C10.0404 8.262 10.5091 7.74117 10.8477 7.10315C11.1992 6.46513 11.375 5.77502 11.375 5.03284C11.375 4.23857 11.1797 3.5094 10.7891 2.84534C10.3984 2.16825 9.86458 1.6344 9.1875 1.24377C8.52344 0.853149 7.79427 0.657837 7 0.657837ZM7 1.90784C7.57292 1.90784 8.09375 2.05107 8.5625 2.33752C9.04427 2.61096 9.42188 2.98857 9.69531 3.47034C9.98177 3.93909 10.125 4.45992 10.125 5.03284C10.125 5.60575 9.98177 6.1331 9.69531 6.61487C9.42188 7.08362 9.04427 7.46122 8.5625 7.74768C8.09375 8.02112 7.57292 8.15784 7 8.15784C6.42708 8.15784 5.89974 8.02112 5.41797 7.74768C4.94922 7.46122 4.57161 7.08362 4.28516 6.61487C4.01172 6.1331 3.875 5.60575 3.875 5.03284C3.875 4.45992 4.01172 3.93909 4.28516 3.47034C4.57161 2.98857 4.94922 2.61096 5.41797 2.33752C5.89974 2.05107 6.42708 1.90784 7 1.90784Z" fill="#6B7280" />
              </svg>
              <span>{activeOrder?.guests} guests</span>
            </div>
            <div className='text-xs flex items-center gap-2'>
              <svg className='w-4 h-4' viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.25 0.0328369C15.7943 0.0328369 15.3711 0.143514 14.9805 0.364868C14.6029 0.586222 14.3034 0.892212 14.082 1.28284C13.8607 1.66044 13.75 2.07711 13.75 2.53284H12.5V3.78284H16.25V2.53284H15C15 2.15523 15.1107 1.85575 15.332 1.6344C15.5664 1.40002 15.8724 1.28284 16.25 1.28284C16.6276 1.28284 16.9271 1.40002 17.1484 1.6344C17.3828 1.85575 17.5 2.15523 17.5 2.53284V6.28284H0.625V7.53284H1.36719L2.32422 12.2985C2.40234 12.624 2.55208 12.9104 2.77344 13.1578C2.99479 13.4052 3.26172 13.581 3.57422 13.6852L3.125 15.0328H4.375L4.78516 13.7828H15.2148L15.625 15.0328H16.875L16.4258 13.6852C16.7513 13.581 17.0312 13.4052 17.2656 13.1578C17.5 12.9104 17.6562 12.624 17.7344 12.2985L18.6328 7.53284H19.375V6.28284H18.75V2.53284C18.75 2.07711 18.6393 1.66044 18.418 1.28284C18.1966 0.892212 17.8906 0.586222 17.5 0.364868C17.1224 0.143514 16.7057 0.0328369 16.25 0.0328369ZM2.63672 7.53284H17.3828L16.5039 12.0446C16.4648 12.1878 16.3867 12.305 16.2695 12.3961C16.1654 12.4873 16.0352 12.5328 15.8789 12.5328H4.17969C4.02344 12.5328 3.88672 12.4873 3.76953 12.3961C3.66536 12.292 3.59375 12.1683 3.55469 12.025L2.63672 7.53284Z" fill="#6B7280" />
              </svg>
              <span>{activeOrder?.bathrooms} baths</span>
            </div>
            <div className='text-xs flex items-center gap-2'>
              <svg className='w-4 h-4' viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.92188 0.0328369L5.86328 0.0523682L0.375 1.34143V13.9977L0.882812 14.0758L5.88281 15.0133L5.94141 15.0328H7.25V0.0328369H5.92188ZM8.5 1.28284V2.53284H10.375V12.5328H8.5V13.7828H11.625V1.28284H8.5ZM6 1.30237V13.7828L1.625 12.9625V2.31799L6 1.30237ZM4.96484 6.90784C4.84766 6.90784 4.74349 6.97294 4.65234 7.10315C4.57422 7.22034 4.53516 7.36357 4.53516 7.53284C4.53516 7.70211 4.57422 7.85185 4.65234 7.98206C4.74349 8.09924 4.84766 8.15784 4.96484 8.15784C5.08203 8.15784 5.17969 8.09924 5.25781 7.98206C5.33594 7.85185 5.375 7.70211 5.375 7.53284C5.375 7.36357 5.33594 7.22034 5.25781 7.10315C5.17969 6.97294 5.08203 6.90784 4.96484 6.90784Z" fill="#6B7280" />
              </svg>
              <span>{activeOrder?.bedrooms} bedrooms</span>
            </div>
            <div className='text-xs flex items-center gap-2'>
              <svg className='w-4 h-4' viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2.75 0.282837C2.24219 0.282837 1.79948 0.471639 1.42188 0.849243C1.05729 1.21383 0.875 1.65002 0.875 2.15784V6.39612C0.679688 6.57841 0.523438 6.78674 0.40625 7.02112C0.302083 7.25549 0.25 7.5094 0.25 7.78284V13.4078H3.375V12.1578H14.625V13.4078H17.75V7.78284C17.75 7.5094 17.6914 7.25549 17.5742 7.02112C17.4701 6.78674 17.3203 6.57841 17.125 6.39612V2.15784C17.125 1.65002 16.9362 1.21383 16.5586 0.849243C16.194 0.471639 15.7578 0.282837 15.25 0.282837H2.75ZM2.75 1.53284H15.25C15.4193 1.53284 15.5625 1.59794 15.6797 1.72815C15.8099 1.84534 15.875 1.98857 15.875 2.15784V5.90784H14.625V5.28284C14.625 4.77502 14.4362 4.33883 14.0586 3.97424C13.694 3.59664 13.2578 3.40784 12.75 3.40784H10.25C9.78125 3.40784 9.36458 3.5706 9 3.89612C8.63542 3.5706 8.21875 3.40784 7.75 3.40784H5.25C4.74219 3.40784 4.29948 3.59664 3.92188 3.97424C3.55729 4.33883 3.375 4.77502 3.375 5.28284V5.90784H2.125V2.15784C2.125 1.98857 2.18359 1.84534 2.30078 1.72815C2.43099 1.59794 2.58073 1.53284 2.75 1.53284ZM5.25 4.65784H7.75C7.91927 4.65784 8.0625 4.72294 8.17969 4.85315C8.3099 4.97034 8.375 5.11357 8.375 5.28284V5.90784H4.625V5.28284C4.625 5.11357 4.68359 4.97034 4.80078 4.85315C4.93099 4.72294 5.08073 4.65784 5.25 4.65784ZM10.25 4.65784H12.75C12.9193 4.65784 13.0625 4.72294 13.1797 4.85315C13.3099 4.97034 13.375 5.11357 13.375 5.28284V5.90784H9.625V5.28284C9.625 5.11357 9.68359 4.97034 9.80078 4.85315C9.93099 4.72294 10.0807 4.65784 10.25 4.65784ZM2.125 7.15784H15.875C16.0443 7.15784 16.1875 7.22294 16.3047 7.35315C16.4349 7.47034 16.5 7.61357 16.5 7.78284V12.1578H15.875V10.9078H2.125V12.1578H1.5V7.78284C1.5 7.61357 1.55859 7.47034 1.67578 7.35315C1.80599 7.22294 1.95573 7.15784 2.125 7.15784Z" fill="#6B7280" />
              </svg>
              <span>{activeOrder?.beds} beds</span>
            </div>
            <div className='text-xs flex items-center gap-2'>
              <svg className='w-4 h-4' viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2.32422 0.958618L1.42578 1.85706L17.6758 18.1071L18.5742 17.2086L14.6484 13.2828H19.375V9.53284H10.8984L2.32422 0.958618ZM10.0195 2.03284C9.8112 2.24117 9.61589 2.54716 9.43359 2.95081C9.1862 3.48466 9.0625 4.00549 9.0625 4.51331C9.0625 4.83883 9.12109 5.15133 9.23828 5.45081C9.35547 5.77633 9.54427 6.06278 9.80469 6.31018C10.3516 6.83101 11.1849 7.16305 12.3047 7.30627C13.2422 7.42346 13.8802 7.58622 14.2188 7.79456C14.388 7.89872 14.5182 8.01591 14.6094 8.14612C14.7005 8.27633 14.7721 8.47164 14.8242 8.73206L16.0547 8.45862C15.9766 8.08101 15.8333 7.74247 15.625 7.44299C15.4297 7.14351 15.1823 6.90914 14.8828 6.73987C14.5833 6.55758 14.2253 6.40784 13.8086 6.29065C13.4701 6.1995 13.0208 6.12138 12.4609 6.05627C11.6146 5.95211 11.0156 5.73075 10.6641 5.39221C10.5339 5.262 10.4427 5.1318 10.3906 5.00159C10.3385 4.85836 10.3125 4.6956 10.3125 4.51331C10.3125 4.18778 10.3971 3.84273 10.5664 3.47815C10.6315 3.3219 10.7357 3.14612 10.8789 2.95081C10.8919 2.92476 10.8984 2.91174 10.8984 2.91174L10.0195 2.03284ZM13.4766 2.22815V3.47815C13.9974 3.47815 14.4206 3.5693 14.7461 3.75159C14.9674 3.8818 15.1367 4.03805 15.2539 4.22034C15.3971 4.45471 15.4883 4.78023 15.5273 5.1969L15.5859 5.78284H16.1523C16.3607 5.78284 16.582 5.80888 16.8164 5.86096C17.1029 5.93909 17.3242 6.04325 17.4805 6.17346C17.6497 6.32971 17.7539 6.54456 17.793 6.81799C17.8451 7.22164 17.7409 7.73596 17.4805 8.36096L18.6523 8.82971C18.9909 8.0094 19.1211 7.28674 19.043 6.66174C18.9779 6.08883 18.724 5.61357 18.2812 5.23596C17.8516 4.85836 17.2982 4.637 16.6211 4.5719C16.5169 4.11617 16.3542 3.72555 16.1328 3.40002C15.9115 3.0745 15.6576 2.82711 15.3711 2.65784C14.8633 2.37138 14.2318 2.22815 13.4766 2.22815ZM0.625 9.53284V13.2828H11.1328L9.88281 12.0328H1.875V10.7828H8.63281L7.38281 9.53284H0.625ZM12.1484 10.7828H14.375V12.0328H13.3984L12.1484 10.7828ZM15.625 10.7828H16.25V12.0328H15.625V10.7828ZM17.5 10.7828H18.125V12.0328H17.5V10.7828Z" fill="#6B7280" />
              </svg>
              <span>{activeOrder?.smokingPolicy}</span>
            </div>
            <div className='text-xs flex items-center gap-2'>
              <svg className='w-4 h-4' viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 0.907837C6.46354 0.907837 4.99219 1.21383 3.58594 1.82581C2.23177 2.39872 1.03385 3.21903 -0.0078125 4.28674L0.871094 5.16565C1.79557 4.21513 2.86328 3.47945 4.07422 2.95862C5.32422 2.42476 6.63281 2.15784 8 2.15784C9.36719 2.15784 10.6758 2.42476 11.9258 2.95862C13.1367 3.47945 14.2044 4.21513 15.1289 5.16565L16.0078 4.28674C14.9661 3.21903 13.7682 2.39872 12.4141 1.82581C11.0078 1.21383 9.53646 0.907837 8 0.907837ZM8 4.03284C6.88021 4.03284 5.8125 4.25419 4.79688 4.6969C3.82031 5.12659 2.95443 5.72555 2.19922 6.49377L3.07812 7.37268C3.71615 6.72164 4.45182 6.21383 5.28516 5.84924C6.14453 5.47164 7.04948 5.28284 8 5.28284C8.95052 5.28284 9.85547 5.47164 10.7148 5.84924C11.5482 6.21383 12.2839 6.72164 12.9219 7.37268L13.8008 6.49377C13.0456 5.72555 12.1797 5.12659 11.2031 4.6969C10.1875 4.25419 9.11979 4.03284 8 4.03284ZM8 7.15784C7.3099 7.15784 6.65234 7.29456 6.02734 7.56799C5.41536 7.84143 4.875 8.21903 4.40625 8.70081L5.28516 9.57971C5.63672 9.21513 6.04688 8.92867 6.51562 8.72034C6.98438 8.512 7.47917 8.40784 8 8.40784C8.52083 8.40784 9.01562 8.512 9.48438 8.72034C9.95312 8.92867 10.3633 9.21513 10.7148 9.57971L11.5938 8.70081C11.125 8.21903 10.5781 7.84143 9.95312 7.56799C9.34115 7.29456 8.6901 7.15784 8 7.15784ZM8 10.2828C7.72656 10.2828 7.47266 10.3414 7.23828 10.4586C7.00391 10.5628 6.79557 10.7125 6.61328 10.9078L8 12.2946L9.38672 10.9078C9.20443 10.7125 8.99609 10.5628 8.76172 10.4586C8.52734 10.3414 8.27344 10.2828 8 10.2828Z" fill="#6B7280" />
              </svg>

              <span>{activeOrder?.amenities[0]}</span>
            </div>
          </div>

          <div className='flex justify-between items-center'>
            <div className='rating text-sm text-gray-500 flex items-center gap-2'>
              <Image src={holidayRating} alt="holidayRating" />
              <span><strong className='font-medium text-black'>{getAVGRating(activeOrder?.ratings)}</strong> ({activeOrder?.ratings.length})</span>
            </div>
            <div className='text-[#04CEDB] font-bold text-xl'>
              {activeOrder?.price.amount} {activeOrder?.price.currency}
            </div>
          </div>
        </div>
      </a>
    </div>
  )
}

export default OrderItemActive